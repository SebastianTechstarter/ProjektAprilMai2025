<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/font-awesome.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
    <script src="./js/core.js"></script>
</head>
<body display-mode="dark">
    
    <!--ELEMENT navigation-->
    <div navigation>
        <div logo>
            <span>B</span>ook<span>B</span>AY
        </div>
        <div center-menu>
            <input type="text" name="search" placeholder="Buchtitle, Author">
        </div>
        <div right-menu>
            <div button switch-display-mode>
                <!--<i class="fa fa-sun-o" aria-hidden="true"></i>-->
                <i class="fa fa-moon-o" aria-hidden="true"></i>
            </div>
            <div button user>
                <i class="fa fa-user" aria-hidden="true"></i>
                <div drop-down>
                    <div button login>Anmelden</div>
                    <div button login>Registrieren</div>
                </div>
            </div>
            <div button shopping-cart>
                <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                <div shopping-cart-article>0</div>
            </div>
        </div>
    </div>

    <!--ELEMENT main Site-->
    <body style="margin: 0; overflow: hidden;">
        <div id="scene-container" style="width: 100vw; height: 100vh;"></div>
      
        <script>
            let scene, camera, renderer, book;
        
            init();
            animate();
        
            function init() {
                scene = new THREE.Scene();
        
                // Kamera
                camera = new THREE.PerspectiveCamera(
                    75,
                    window.innerWidth / window.innerHeight,
                    0.1,
                    1000
                );
                camera.position.set(0, 0, 6);
                camera.lookAt(0, 0, 0);
        
                renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.getElementById('scene-container').appendChild(renderer.domElement);
        
                const light = new THREE.DirectionalLight(0xffffff, 1);
                light.position.set(1, 0, 14).normalize();
                scene.add(light);
        
                const textureLoader = new THREE.TextureLoader();

                //Texture hinten
                const coverTexture = textureLoader.load('./images/book_1/back.png');
                coverTexture.rotation = 1.57;
                coverTexture.center.set(0.5, 0.5);

                //Texture vorne
                const backTexture = textureLoader.load('./images/book_1/front.png');
                backTexture.rotation = -1.57;
                backTexture.center.set(0.5, 0.5);

                //Texture seite
                const siteTexture = textureLoader.load('https://images.pexels.com/photos/1670977/pexels-photo-1670977.jpeg');
                siteTexture.rotation = 0;
                siteTexture.center.set(0.5, 0.5);
        
                // Buch-Komponenten
                const coverGeometry = new THREE.BoxGeometry(0.01, 2, 3); // Dicke, HÃ¶he, Breite
                const pagesGeometry = new THREE.BoxGeometry(0.3, 1.98, 3);
                const backGeometry = new THREE.BoxGeometry(0.3, 0.01, 3);
        
                const coverMaterial = new THREE.MeshPhongMaterial({ map: coverTexture });
                const backMaterial = new THREE.MeshPhongMaterial({map : backTexture});
                const siteMaterial = new THREE.MeshPhongMaterial({map: siteTexture});
                const pageMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
        
                const leftCover = new THREE.Mesh(coverGeometry, coverMaterial);
                const rightCover = new THREE.Mesh(coverGeometry, backMaterial);
                const backCover = new THREE.Mesh(backGeometry, siteMaterial);
                const pages = new THREE.Mesh(pagesGeometry, pageMaterial);
        
                // Positionieren
                leftCover.position.x = -0.15;
                rightCover.position.x = 0.15;
                backCover.position.x = 0.0;
                backCover.position.y = 0.996;
                pages.position.x = 0;
        
                // Buch-Gruppierung
                book = new THREE.Group();
                book.add(leftCover);
                book.add(rightCover);
                book.add(backCover);
                book.add(pages);
        
                // ðŸ” Buch hochkant aufstellen
                book.rotation.x = Math.PI / 2;
        
                scene.add(book);
        
                // Fenster-Anpassung
                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });
            }
        
            function animate() {
                requestAnimationFrame(animate);

                // Drehung um die echte (Welt-)Y-Achse
                const axis = new THREE.Vector3(0, 1, 0);
                book.rotateOnWorldAxis(axis, -0.005); // Negativ = im Uhrzeigersinn

                renderer.render(scene, camera);
                }
          </script>
      </body>
      

</body>
</html>